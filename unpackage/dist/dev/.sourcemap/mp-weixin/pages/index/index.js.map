{"version":3,"sources":["uni-app:///main.js","webpack:///D:/大三上课程资料/yyy/cloud-disk/cloud-disk/pages/index/index.vue?baa0","webpack:///D:/大三上课程资料/yyy/cloud-disk/cloud-disk/pages/index/index.vue?548b","webpack:///D:/大三上课程资料/yyy/cloud-disk/cloud-disk/pages/index/index.vue?ecce","webpack:///D:/大三上课程资料/yyy/cloud-disk/cloud-disk/pages/index/index.vue?d3f5","uni-app:///pages/index/index.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;;;AAGpD;AAC+L;AAC/L,gBAAgB,mMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA8uB,CAAgB,6tBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyIlwB;AACA;AACA,kBADA;AAEA,gBAFA;AAGA,oBAHA;AAIA,sBAJA,EADA;;AAOA,MAPA,kBAOA;AACA;AACA,cADA;AAEA,kBAFA;AAGA;AACA;AACA,qBADA;AAEA,mBAFA,EADA;;AAKA;AACA,qBADA;AAEA,2BAFA,EALA,CAHA;;;AAaA,qBAbA;AAcA,oBAdA;;AAgBA,cAhBA;AAiBA;AACA;AACA,6BADA;AAEA,6BAFA;AAGA,oBAHA,EADA;;AAMA;AACA,6BADA;AAEA,6BAFA;AAGA,oBAHA,EANA;;AAWA;AACA,6BADA;AAEA,2BAFA;AAGA,oBAHA,EAXA;;AAgBA;AACA,6BADA;AAEA,6BAFA;AAGA,qBAHA,EAhBA,CAjBA;;;;AAwCA,GAhDA;AAiDA,QAjDA,oBAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAxDA;AAyDA;AACA;AACA,cAFA,sBAEA,IAFA,EAEA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA,oBADA;AAEA,wBAFA;AAGA,YAHA;;AAKA,OAZA;AAaA,KAhBA;AAiBA,WAjBA,qBAiBA;AACA;AACA;AACA,SADA,yBACA,YADA,sBACA,OADA,GACA;AACA,mBADA,EADA;;AAIA,UAJA,CAIA;AACA;AACA,OANA;AAOA,KA1BA;AA2BA;AACA,WA5BA,mBA4BA,IA5BA,EA4BA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA;AACA,6BADA;AAEA,gEAFA;;AAIA;AACA;AACA;AACA,uEADA;;AAGA;AACA;AACA;AACA,uBADA;AAEA,2BAFA;;AAIA;AACA;AACA,uBADA;AAEA,2CAFA;;AAIA,gBAzBA;;AA2BA,KAxDA;AAyDA;AACA,cA1DA,sBA0DA,KA1DA,EA0DA;AACA;AACA;AACA;AACA,KA9DA;AA+DA,kBA/DA,4BA+DA;AACA;AACA,KAjEA;AAkEA,UAlEA,kBAkEA,CAlEA,EAkEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA7EA;AA8EA;AACA,aA/EA,uBA+EA;AACA;AACA;AACA;AACA;AACA,KApFA;AAqFA;AACA,aAtFA,uBAsFA;AACA;AACA;AACA;AACA;AACA,KA3FA;AA4FA;AACA,qBA7FA,6BA6FA,IA7FA,EA6FA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,yBAFA;;AAIA;AACA;AACA;AACA,gBADA;AAEA,0BAFA;AAGA;AACA,sBADA,EAHA;;AAMA,2BANA;;AAQA,gBARA,CAQA;AACA;AACA;AACA;AACA,6BADA;AAEA,4BAFA;;AAIA;AACA;AACA,aAjBA;AAkBA;AACA,WA3BA;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,4BAFA;;AAIA;AACA;AACA;AACA;AACA,gBADA;AAEA,0BAFA;AAGA;AACA,wCADA;AAEA,qCAFA;AAGA,sCAHA,EAHA;;AAQA,2BARA;;AAUA,gBAVA,CAUA;AACA;AACA;AACA,8BADA;AAEA,4BAFA;;AAIA,aAhBA;AAiBA;AACA,WA3BA;AA4BA;AACA,gBA/DA;;AAiEA,KA/JA;AAgKA;AACA,iBAjKA,2BAiKA;AACA;AACA,KAnKA;AAoKA;AACA,kBArKA,0BAqKA,IArKA,EAqKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA,4BAFA;;AAIA;AACA;AACA;AACA,gBADA;AAEA,6BAFA;AAGA;AACA,qCADA;AAEA,qCAFA,EAHA;;AAOA,2BAPA;;AASA,gBATA,CASA;AACA;AACA;AACA,gCADA;AAEA,4BAFA;;AAIA,aAfA;AAgBA;AACA;AACA,WA1BA;AA2BA;AACA;AACA,gBA/BA;;AAiCA,KAxMA;AAyMA;AACA,UA1MA,oBA0MA;AACA;AACA;AACA;AACA,mBADA;AAEA,uCAFA;;AAIA,KAjNA;AAkNA;AACA,UAnNA,kBAmNA,CAnNA,EAmNA;AACA;AACA;AACA;;AAEA;AACA,SADA,CACA,wCADA,EACA;AACA,mBADA,EADA;;AAIA,UAJA,CAIA;AACA;AACA,OANA;AAOA,KA/NA,EAzDA;;AA0RA;AACA,WADA,qBACA;AACA;AACA;AACA;AACA;AACA;AACA,KAPA;AAQA,WARA,qBAQA;AACA;AACA;AACA;AACA;AACA;AACA,KAdA;AAeA;AACA,aAhBA,uBAgBA;AACA;AACA,KAlBA;AAmBA;AACA,cApBA,wBAoBA;AACA;AACA,KAtBA;AAuBA,WAvBA,qBAuBA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,oBAFA,EADA;;AAKA;AACA,8BADA;AAEA,oBAFA,EALA;;;AAUA;AACA;AACA;AACA,2BADA;AAEA,kBAFA,EADA;;AAKA;AACA,+BADA;AAEA,kBAFA,EALA;;AASA;AACA,4BADA;AAEA,kBAFA,EATA;;AAaA;AACA,kCADA;AAEA,mBAFA,EAbA;;;AAkBA,KAvDA,EA1RA,E","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../ProgramFiles/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<!-- 自定义导航栏 -->\n\t\t<nav-bar>\n\t\t\t<template v-if=\"checkCount === 0\">\n\t\t\t\t<!-- 插槽再一次发挥逆天作用，进入子目录，左边将变成返回箭头，导航栏变成子目录名称 -->\n\t\t\t\t<template slot=\"left\">\n\t\t\t\t\t<view\n\t\t\t\t\t\tstyle=\"width: 60rpx;height: 60rpx;\"\n\t\t\t\t\t\tclass=\"flex align-center justify-center bg-light rounded-circle ml-3\"\n\t\t\t\t\t\thover-class=\"bg-hover-light\"\n\t\t\t\t\t\t@tap=\"backUp\"\n\t\t\t\t\t\tv-if=\"current\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<text class=\"iconfont icon-fanhui\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<text class=\"font-md ml-3\">{{ current ? current.name : '首页' }}</text>\n\t\t\t\t</template>\n\t\t\t\t<template slot=\"right\">\n\t\t\t\t\t<view\n\t\t\t\t\t\tstyle=\"width: 60rpx;height: 60rpx;\"\n\t\t\t\t\t\tclass=\"flex align-center justify-center bg-light rounded-circle mr-3\"\n\t\t\t\t\t\thover-class=\"bg-hover-light\"\n\t\t\t\t\t\t@tap=\"openAddDialog\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<text class=\"iconfont icon-zengjia\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view\n\t\t\t\t\t\tstyle=\"width: 60rpx;height: 60rpx;\"\n\t\t\t\t\t\tclass=\"flex align-center justify-center bg-light rounded-circle mr-3\"\n\t\t\t\t\t\thover-class=\"bg-hover-light\"\n\t\t\t\t\t\t@click=\"openSortDialog\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<text class=\"iconfont icon-gengduo\"></text>\n\t\t\t\t\t</view>\n\t\t\t\t</template>\n\t\t\t</template>\n\n\t\t\t<template v-else>\n\t\t\t\t<view slot=\"left\" class=\"font-md ml-3 text-primary\" @click=\"handleCheckAll(false)\">取消</view>\n\t\t\t\t<text class=\"font-md font-weight-bold\">已选中{{ checkCount }}个</text>\n\t\t\t\t<view slot=\"right\" class=\"font-md mr-3 text-primary\" @click=\"handleCheckAll(true)\">全选</view>\n\t\t\t</template>\n\t\t</nav-bar>\n\n\t\t<!-- 搜索框 -->\n\t\t<view class=\"px-3 py-2\">\n\t\t\t<view class=\"position-relative\">\n\t\t\t\t<view \n\t\t\t\t\tstyle=\"height: 70rpx;width: 70rpx;position: absolute;top: 0;left: 0;\" \n\t\t\t\t\tclass=\"flex align-center justify-center text-light-muted\"\n\t\t\t\t>\n\t\t\t\t\t<text class=\"iconfont icon-sousuo\"></text>\n\t\t\t\t</view>\n\t\t\t\t<input \n\t\t\t\t\tstyle=\"height: 70rpx;padding-left: 70rpx;\" \n\t\t\t\t\ttype=\"text\" \n\t\t\t\t\tclass=\"bg-light font-md rounded-circle\" \n\t\t\t\t\tplaceholder=\"搜索网盘文件\" \n\t\t\t\t\t@input=\"search\" \n\t\t\t\t/>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 列表 -->\n\t\t<f-list v-for=\"(item, index) in list\" :key=\"index\" :item=\"item\" :index=\"index\" @select=\"select\" @click=\"doEvent(item)\"></f-list>\n\n\t\t<!-- 底部操作条 -->\n\t\t<!-- 选中个数大于0才会出现这个操作条 -->\n\t\t<view v-if=\"checkCount > 0\">\n\t\t\t<!-- 这里要留一定的高度，因为底部操作条需要被固定在底部，并空出底部tarbar高的地方 -->\n\t\t\t<view style=\"height: 115rpx;\"></view>\n\t\t\t<!-- 操作条容器的样式，高度，颜色，固定在底部，处置方向拉升效果 -->\n\t\t\t<view style=\"height: 115rpx;\" class=\"flex align-stretch bg-primary text-white fixed-bottom\">\n\t\t\t\t<!-- 根据元素个数等分容器，所以要么四个等分，要么两个等分，行高的修改可以让图标和文字之间的距离变得合理，点击还会变色：hover-class -->\n\t\t\t\t<view\n\t\t\t\t\tclass=\"flex-1 flex flex-column align-center justify-center\"\n\t\t\t\t\tstyle=\"line-height: 1.5;\"\n\t\t\t\t\tv-for=\"(item, index) in actions\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\thover-class=\"bg-hover-primary\"\n\t\t\t\t\t@click=\"handleBottomEvent(item)\"\n\t\t\t\t>\n\t\t\t\t\t<text class=\"iconfont\" :class=\"item.icon\"></text>\n\t\t\t\t\t{{ item.name }}\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 是否要删除 -->\n\t\t<f-dialog ref=\"delete\">是否删除选中的文件？</f-dialog>\n\n\t\t<!-- 重命名,通过ref定义不同的对话框对象，不同操作弹出的dialog的不同的对象 -->\n\t\t<f-dialog ref=\"rename\"><input type=\"text\" v-model=\"renameValue\" class=\"flex-1 bg-light rounded px-2\" style=\"height: 95rpx;\" placeholder=\"重命名\" /></f-dialog>\n\n\t\t<!-- 新建文件夹，使用自定义弹出框，使用input作为插槽，绑定data中的newdirname变量 -->\n\t\t<f-dialog ref=\"newdir\"><input type=\"text\" v-model=\"newdirname\" class=\"flex-1 bg-light rounded px-2\" style=\"height: 95rpx;\" placeholder=\"新建文件夹名称\" /></f-dialog>\n\n\t\t<!-- 添加操作条，应当能理解这里ref的作用了，type标识弹出的未知类型，具体取值都在popup子组件中 -->\n\t\t<uni-popup ref=\"add\" type=\"bottom\">\n\t\t\t<view class=\"bg-white flex\" style=\"height: 200rpx;\">\n\t\t\t\t<view class=\"flex-1 flex align-center justify-center flex-column\" hover-class=\"bg-light\" v-for=\"(item, index) in addList\" :key=\"index\" @tap=\"handleAddEvent(item)\">\n\t\t\t\t\t<!-- 每个操作的图标，可以传入图标的名称和颜色，很灵活 -->\n\t\t\t\t\t<text\n\t\t\t\t\t\tstyle=\"width: 110rpx;height: 110rpx;\"\n\t\t\t\t\t\tclass=\"rounded-circle bg-light iconfont flex align-center justify-center\"\n\t\t\t\t\t\t:class=\"item.icon + ' ' + item.color\"\n\t\t\t\t\t></text>\n\t\t\t\t\t<!-- 每个操作的名称 -->\n\t\t\t\t\t<text class=\"font text-muted\">{{ item.name }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-popup>\n\n\t\t<!-- 排序框，底部弹出，遍历排序操作数组，为当前索引项绑定文字蓝色样式 -->\n\t\t<uni-popup ref=\"sort\" type=\"bottom\">\n\t\t\t<view class=\"bg-white\">\n\t\t\t\t<view\n\t\t\t\t\tv-for=\"(item, index) in sortOptions\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\tclass=\"flex align-center justify-center py-3 font border-bottom border-light-secondary\"\n\t\t\t\t\t:class=\"index === sortIndex ? 'text-main' : 'text-dark'\"\n\t\t\t\t\thover-class=\"bg-light\"\n\t\t\t\t\t@click=\"changeSort(index)\"\n\t\t\t\t>\n\t\t\t\t\t{{ item.name }}\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-popup>\n\t</view>\n</template>\n\n<script>\nimport navBar from '@/components/common/nav-bar.vue';\nimport fList from '@/components/common/f-list.vue';\nimport fDialog from '@/components/common/f-dialog.vue';\nimport uniPopup from '@/components/uni-ui/uni-popup/uni-popup.vue';\nexport default {\n\tcomponents: {\n\t\tnavBar,\n\t\tfList,\n\t\tfDialog,\n\t\tuniPopup\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdirs: [],\n\t\t\tsortIndex: 0,\n\t\t\tsortOptions: [\n\t\t\t\t{\n\t\t\t\t\tname: '按名称排序',\n\t\t\t\t\tkey: 'name'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '按时间排序',\n\t\t\t\t\tkey: 'created_time'\n\t\t\t\t}\n\t\t\t],\n\t\t\trenameValue: '',\n\t\t\tnewdirname: '',\n\n\t\t\tlist: [],\n\t\t\taddList: [\n\t\t\t\t{\n\t\t\t\t\ticon: 'icon-file-b-6',\n\t\t\t\t\tcolor: 'text-success',\n\t\t\t\t\tname: '上传图片'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'icon-file-b-9',\n\t\t\t\t\tcolor: 'text-primary',\n\t\t\t\t\tname: '上传视频'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'icon-file-b-8',\n\t\t\t\t\tcolor: 'text-muted',\n\t\t\t\t\tname: '上传文件'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'icon-file-b-2',\n\t\t\t\t\tcolor: 'text-warning',\n\t\t\t\t\tname: '新建文件夹'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t},\n\tonLoad() {\n\t\tlet dirs = uni.getStorageSync('dirs');\n\t\tif (dirs) {\n\t\t\tthis.dirs = JSON.parse(dirs);\n\t\t}\n\t\t// 初始化数据\n\t\tthis.getData();\n\t},\n\tmethods: {\n\t\t// 将数据格式转化为我们需要显示的样子，不同的文件类型，是否选中\n\t\tformatList(list) {\n\t\t\treturn list.map(item => {\n\t\t\t\tlet type = 'none';\n\t\t\t\tif (item.isdir === 1) {\n\t\t\t\t\ttype = 'dir';\n\t\t\t\t} else {\n\t\t\t\t\ttype = item.ext.split('/')[0] || 'none';\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttype,\n\t\t\t\t\tchecked: false,\n\t\t\t\t\t...item\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tgetData() {\n\t\t\tlet orderby = this.sortOptions[this.sortIndex].key;\n\t\t\tthis.$H\n\t\t\t\t.get(`/file?file_id=${this.file_id}&orderby=${orderby}`, {\n\t\t\t\t\ttoken: true\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.list = this.formatList(res.rows);\n\t\t\t\t});\n\t\t},\n\t\t//列表点击事件\n\t\tdoEvent(item) {\n\t\t\tswitch (item.type) {\n\t\t\t\tcase 'image': //预览图片\n\t\t\t\t\tlet images = this.list.filter(item => {\n\t\t\t\t\t\treturn item.type === 'image';\n\t\t\t\t\t});\n\t\t\t\t\tuni.previewImage({\n\t\t\t\t\t\tcurrent: item.url,\n\t\t\t\t\t\turls: images.map(item => item.url)\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'video':\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '../video/video?url=' + item.u + '&title=' + item.name\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.dirs.push({\n\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\tname: item.name\n\t\t\t\t\t});\n\t\t\t\t\tthis.getData();\n\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\tkey: 'dirs',\n\t\t\t\t\t\tdata: JSON.stringify(this.dirs)\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t//切换顺序\n\t\tchangeSort(index) {\n\t\t\tthis.sortIndex = index;\n\t\t\tthis.getData();\n\t\t\tthis.$refs.sort.close();\n\t\t},\n\t\topenSortDialog() {\n\t\t\tthis.$refs.sort.open();\n\t\t},\n\t\tselect(e) {\n\t\t\t//接收到子组件传递过来的索引选中状态，将对应的list中的数据更新\n\t\t\tthis.list[e.index].checked = e.value;\n\n\t\t\t// 自己的方式实现多选操作——根据选中的元素数量切换顶部导航样式\n\t\t\t// if (e.value === true){\n\t\t\t// \tthis.count = this.count + 1\n\t\t\t// } else {\n\t\t\t// \tthis.count = this.count - 1\n\t\t\t// }\n\t\t\t// console.log(this.count);\n\t\t},\n\t\t// 自己的方式实现全选\n\t\tselectAll() {\n\t\t\tlet length = this.list.length;\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tthis.list[i].checked = true;\n\t\t\t}\n\t\t},\n\t\t// 自己的方式实现取消全选\n\t\tcancelAll() {\n\t\t\tlet length = this.list.length;\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tthis.list[i].checked = false;\n\t\t\t}\n\t\t},\n\t\t//处理底部操作条事件，这里仅对“删除”做了处理\n\t\thandleBottomEvent(item) {\n\t\t\tswitch (item.name) {\n\t\t\t\tcase '删除':\n\t\t\t\t\tthis.$refs.delete.open(close => {\n\t\t\t\t\t\t//加载框过滤下\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '删除中...',\n\t\t\t\t\t\t\tmask: false\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//删除接口需要传“1,2,3”这样的参数形式，所以用map取出checkList中每条数据的id，然后用join拼接上逗号\n\t\t\t\t\t\tlet ids = this.checkList.map(item => item.id).join(',');\n\t\t\t\t\t\tthis.$H\n\t\t\t\t\t\t\t.post(\n\t\t\t\t\t\t\t\t'/file/delete',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tids\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ token: true }\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t//重新请求数据\n\t\t\t\t\t\t\t\tthis.getData();\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t//结束loading\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tclose();\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase '重命名':\n\t\t\t\t\t// 重命名只能对单个文件进行，所以取this.checkList[0],也就是选中的唯一元素\n\t\t\t\t\tthis.renameValue = this.checkList[0].name;\n\t\t\t\t\tthis.$refs.rename.open(close => {\n\t\t\t\t\t\tif (this.renameValue == '') {\n\t\t\t\t\t\t\treturn uni.showToast({\n\t\t\t\t\t\t\t\ttitle: '文件名不能为空',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(this.checkList[0].id + '>>>>>' + this.file_id);\n\t\t\t\t\t\t//重命名接口需要三个参数，自身id，目录id，新名称\n\t\t\t\t\t\tthis.$H\n\t\t\t\t\t\t\t.post(\n\t\t\t\t\t\t\t\t'/file/rename',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: this.checkList[0].id,\n\t\t\t\t\t\t\t\t\tfile_id: this.file_id,\n\t\t\t\t\t\t\t\t\tname: this.renameValue\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ token: true }\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\tthis.checkList[0].name = this.renameValue;\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '重命名成功',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tclose();\n\t\t\t\t\t});\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t//打开添加操作条\n\t\topenAddDialog() {\n\t\t\tthis.$refs.add.open();\n\t\t},\n\t\t//处理添加操作条的各种事件\n\t\thandleAddEvent(item) {\n\t\t\tthis.$refs.add.close();\n\t\t\tswitch (item.name) {\n\t\t\t\tcase '新建文件夹':\n\t\t\t\t\tthis.$refs.newdir.open(close => {\n\t\t\t\t\t\tif (this.newdirname == '') {\n\t\t\t\t\t\t\treturn uni.showToast({\n\t\t\t\t\t\t\t\ttitle: '文件夹名称不能为空',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 请求新增文件夹接口\n\t\t\t\t\t\tthis.$H\n\t\t\t\t\t\t\t.post(\n\t\t\t\t\t\t\t\t'/file/createdir',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfile_id: this.file_id,\n\t\t\t\t\t\t\t\t\tname: this.newdirname\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ token: true }\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\tthis.getData();\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '新建文件夹成功',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tclose();\n\t\t\t\t\t\tthis.newdirname = '';\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t// 返回上一个人目录\n\t\tbackUp() {\n\t\t\tthis.dirs.pop();\n\t\t\tthis.getData();\n\t\t\tuni.setStorage({\n\t\t\t\tkey: 'dirs',\n\t\t\t\tdata: JSON.stringify(this.dirs)\n\t\t\t});\n\t\t},\n\t\t//搜索功能，关键字为空就走请求所有数据的接口，否则就将文本框实时输入的内容作为挂见此进行搜索\n\t\tsearch(e) {\n\t\t\tif (e.detail.value === '') {\n\t\t\t\treturn this.getData();\n\t\t\t}\n\n\t\t\tthis.$H\n\t\t\t\t.get('/file/search?keyword=' + e.detail.value, {\n\t\t\t\t\ttoken: true\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.list = this.formatList(res.rows);\n\t\t\t\t});\n\t\t}\n\t},\n\tcomputed: {\n\t\tfile_id() {\n\t\t\tlet l = this.dirs.length;\n\t\t\tif (l === 0) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn this.dirs[l - 1].id;\n\t\t},\n\t\tcurrent() {\n\t\t\tlet l = this.dirs.length;\n\t\t\tif (l === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn this.dirs[l - 1];\n\t\t},\n\t\t//选中列表\n\t\tcheckList() {\n\t\t\treturn this.list.filter(item => item.checked);\n\t\t},\n\t\t//选中数量\n\t\tcheckCount() {\n\t\t\treturn this.checkList.length;\n\t\t},\n\t\tactions() {\n\t\t\t// console.log(this.checkCount);\n\t\t\tif (this.checkCount > 1) {\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: 'icon-xiazai',\n\t\t\t\t\t\tname: '下载'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: 'icon-shanchu',\n\t\t\t\t\t\tname: '删除'\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ticon: 'icon-xiazai',\n\t\t\t\t\tname: '下载'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'icon-fenxiang-1',\n\t\t\t\t\tname: '分享'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'icon-shanchu',\n\t\t\t\t\tname: '删除'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticon: 'icon-chongmingming',\n\t\t\t\t\tname: '重命名'\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t}\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":""}